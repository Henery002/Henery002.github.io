---
title: 在本地计算机搭建Linux开发环境
date: 2018-02-28 16：39
categories:
  - 原创
  - 工程搭建
tags:
  - 开发环境
  - Linux
---

> 2018/02/28 16:39 在自己的计算机（主机名：myCent）上配置 Linux、xshell、xftp 成功：
> 虚拟机名：Henery CentOS
> 用 户 名：root
> 密 码：datatom

### 大致过程：

#### 1. 安装 CentOS 7，配置 IP

> [注]：安装第一步中选择“自定义”安装。

1. 在安装完 CentOS 后，创建虚拟机时，必须将虚拟机参数：网络适配器-网络连接设置为 桥接模式（不是 NAT 模式），否则在后续使用 xshell 时无法连接到虚拟主机。

2. 配置虚拟机 IP，然后重启网络
   vi /etc/sysconfig/network-scripts/ifcfg-ens33
   （该内容在 02-2 中有记录，在自己的计算机上配置的 IP 为 192.168.1.221）
   service network restart
   查看 linux IP 是否设置成功：
   ip addr

#### 2. 安装 nodejs、npm

1.  官网下载 nodejs 对应版本压缩包（此处下载到 v8.9.3 版本，后来(第 3 步中)证明 v8.9 的版本过高，存在问题，此处建议直接安装 v7.9.0 版本），可使用 xftp 上传到 linux 服务器（可放在 /tmp 目录下）

2.  使用 tar -xvf node-v8.9.3-linux-x64.tar.xz 命令在当前文件夹 /tmp 解压（后来发现 /tmp 文件夹下的文件存在关机后消失问题，所以可以更换保存路径于 /opt 下）

3.  通过建立软连接，将 node、npm 变为全局命令。参考文章：https://www.cnblogs.com/liuqi/p/6483317.html
    查看，安装成功：
    后来重装 node 后，更改了安装位置：

    【注】：

    1.  在安装 node、npm 时，当执行 node -v 或 npm -v 命令，系统提示权限不够时，可使用以下方法解决：
        进入到 node 或 npm 所在路径下，执行 chmod a+x npm 或 chmod a+x node 为文件设定可访问权限。具体可百度。

    2.  软连接配置成功后可到 .usr/local/bin 下查看：

    3.  上述安装了 node 的高版本，再使用时会带来一些意外报错问题，建议将 nodejs 降级（v7 版本）。
        如：在 d-vault 项目中启动服务（npm start）时，报错（Node-Sass 不支持问题）导致无法开启项目：

        由于上述方法采用 通过解压 node.tar 包、设置软连接 的方式安装 node，所以要将 node 重装到 v7 版本时，只需要：

        1. 删除原 node.tar 包 解压出来的文件夹
        2. 删除原设置的软连接
           cd /usr/local/bin
           rm -rf node
           rm -rf npm
        3. 重新下载所需版本 node.tar 包，解压
        4. 重新设置软连接
           ln -s /tmp/node-v7.9.0-linux-x64/bin/npm /usr/local/bin
           ln -s /tmp/node-v7.9.0-linux-x64/bin/node /usr/local/bin
        5. 检查是否安装成功
           node -v
           npm -v

        由于上述重装了 node，所以需要重装一下 node-sass ，然后再次运行 npm start ：
        npm install node-sass
        尽管依然有报错，但未影响服务开启。

        【注】：安装 nodejs，还有其他方式，上述只是其中一种。

    4.  安装 git，拉取代码库
        若 CentOS 系统未自带 git 版本，可使用 yum 命令安装 git ，但是版本较低。后续可重装高版本 git。
        参考文章：[CentOS 安装升级高版本 git](http://blog.csdn.net/lianxiaopang/article/details/78501569)，以下为该文章解决方式。


        1. yum install git #安装过程较冗长，慢慢等待。此命令安装了 git v1 版本较低

        【注】：在运行 yum 命令时，系统可能会报错：Could not retrieve mirrorlist http://mirrorlist.centos.org/?release=6&arch=x86_64&repo=os error was14:......
        解决方法：配置 /etc/resolv.conf 文件。参考文章：http://blog.csdn.net/a791123503/article/details/77823498
        vi /etc/resolv.conf
        键入：nameserver 8.8.8.8
        search localdomain #后保存退出
        可成功解决 yum 命令上述异常执行的问题

        2. yum remove git #先卸载低版本 git
        3. yum install -y zlib-devel bzip2-devel openssl-devel ncurses-devel gcc perl-ExtUtils-MakeMaker package #安装依赖包
            【注】：在同事电脑上首次安装 linux、在 linux 在安装 git、安装 git 依赖包时，执行该命令不久后安装进程停滞：

电脑蓝屏。
【解决】是否能解决待验证：百度 https://blog.csdn.net/dmt742055597/article/details/78580008?locationNum=10&fps=1
错误原因：未安装 deltarpm
依次执行：
yum provides '\*/applydeltarpm'
yum install deltarpm
然后再重新继续执行依赖包安装

1.  下载高版本 git ( https://www.kernel.org/pub/software/scm/git/git-2.13.2.tar.gz)，使用命令 tar -xvf name 解压放于 linux 服务器 /usr/src 下
2.  cd git-2.13.2
    ./configure --prefix=/usr/local/git all
    make && make install
3.  将 git 加入环境变量
    echo "export PATH=\$PATH:/usr/local/git/bin" >> /etc/bashrc
    source /etc/bashrc
4.  验证 git 是否安装成功
    git --version #非 git -v

5.  安装 git lfs（暂略）
6.  拉取代码库
    git clone "http://wei.fanguang:datatom.com@211.144.114.26:5088/trunk/d-vault.git"
    此处报错：fatal: Unable to find remote helper for 'http'

法一：
查阅资料发现可能是由于 git 版本缺少 curl 和 expat 组件的支持，通过以下方式解决：（参考文章：）  
 https://stackoverflow.com/questions/4569089/cant-update-rvm-fatal-unable-to-find-remote-helper-for-http

        1.  下载 git 的 tar 包，解压于 /usr/src 下
        2.  cd git-2.13.2
        3.  ./configure --with-curl --with-expat
        4.  make
        5.  sudo make install
            重新执行 git clone，成功拉取。

        法二：
        后来发现法一已经不再生效，所以查找到法二。
        原因为 curl-devel 未安装
        参考文章：https://stackoverflow.com/questions/8329485/unable-to-find-remote-helper-for-https-during-git-clone

        1.  yum install curl-devel
        2.  #cd to anywhere the source for git is
        3.  cd /usr/src/git-2.13.2 #linux 下 git 的安装位置
        4.  ./configure
        5.  make
        6.  make install
            重新执行 git clone ，成功。

#### 3. 安装 Xshell 5、Xftp 5

    使用虚拟主机 ip 连接到虚拟主机，键入 用户名和密码 连接。

#### 4. ......
